#!/usr/bin/env ruby

require 'daitss'

def usage
  STDERR.puts "Usage: set-password username newpass"
  exit 1
end

usage unless ARGV[0] and ARGV[1]
usage unless ARGV.length == 2

include Daitss

load_archive

u = User.get(ARGV[0])
u.encrypt_auth ARGV[1]
u.save

puts "password changed for " + ARGV[0]

